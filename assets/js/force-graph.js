document.addEventListener("DOMContentLoaded",(function(){function t(t,e){const o=new Set;i.forEach((t=>{t.source.id===e.id&&o.add(t.target.id),t.target.id===e.id&&o.add(t.source.id)})),h.attr("opacity",(t=>t.id===e.id?"gold":o.has(t.id)?1:.2)),y.attr("stroke-opacity",(t=>t.source.id===e.id||t.target.id===e.id?.9:.1))}function e(){h.attr("opacity",1),y.attr("stroke-opacity",.6)}function o(t){function e(e,o){e.active||t.alphaTarget(.3).restart(),o.fx=o.x,o.fy=o.y}function o(t,e){e.fx=t.x,e.fy=t.y}function r(e,o){e.active||t.alphaTarget(0),o.fx=null,o.fy=null}return d3.drag().on("start",e).on("drag",o).on("end",r)}function r(){m.attr("cx",(t=>t.source.x)).attr("cy",(t=>t.source.y)).transition().duration(2e3).ease(d3.easeLinear).attr("cx",(t=>t.target.x)).attr("cy",(t=>t.target.y)).on("end",r)}const a=[{id:"Domain Knowledge",group:"core"},{id:"Process design",group:"method"},{id:"Design",group:"method"},{id:"Modeling",group:"method"},{id:"Optimization",group:"method"},{id:"Operation",group:"method"},{id:"Energy Systems",group:"domain"},{id:"Smart manufacturing",group:"domain"},{id:"Molecular Systems",group:"domain"},{id:"Healthcare",group:"domain"}],i=[],d=a.filter((t=>"method"===t.group)).map((t=>t.id)),n=a.filter((t=>"domain"===t.group)).map((t=>t.id));n.forEach((t=>{d.forEach((e=>i.push({source:e,target:t})))}));const c=900,s=400,l=d3.select("#pse-radial-force").append("svg").attr("viewBox",[0,0,c,s]).classed("svg-content",!0),g=80,f=180,u={x:c/2,y:s/2},p=d3.forceSimulation(a).force("link",d3.forceLink(i).id((t=>t.id)).distance(160)).force("charge",d3.forceManyBody().strength(-300)).force("collision",d3.forceCollide(40)).force("x",d3.forceX((t=>"core"===t.group?u.x:"method"===t.group?u.x+g*Math.cos(2*d.indexOf(t.id)*Math.PI/d.length):"domain"===t.group?u.x+f*Math.cos(2*n.indexOf(t.id)*Math.PI/n.length):void 0)).strength(.7)).force("y",d3.forceY((t=>"core"===t.group?u.y:"method"===t.group?u.y+g*Math.sin(2*d.indexOf(t.id)*Math.PI/d.length):"domain"===t.group?u.y+f*Math.sin(2*n.indexOf(t.id)*Math.PI/n.length):void 0)).strength(.7)),y=l.append("g").attr("stroke","#aaa").attr("stroke-opacity",.6).selectAll("line").data(i).join("line").attr("stroke-width",2),h=l.append("g").selectAll("circle").data(a).join("circle").attr("r",(t=>"core"===t.group?24:"method"===t.group?16:12)).attr("fill",(t=>"core"===t.group?"#ff7f0e":"method"===t.group?"#1f77b4":"#32CD32")).attr("stroke","#292929").attr("stroke-width",1).on("mouseover",t).on("mouseout",e).call(o(p)),x=l.append("g").selectAll("text").data(a).join("text").attr("dy",15).attr("text-anchor","middle").attr("fill","#6B8E23").style("font-size","14px").style("pointer-events","none").text((t=>t.id));p.on("tick",(()=>{y.attr("x1",(t=>t.source.x)).attr("y1",(t=>t.source.y)).attr("x2",(t=>t.target.x)).attr("y2",(t=>t.target.y)),h.attr("cx",(t=>t.x)).attr("cy",(t=>t.y)),x.attr("x",(t=>t.x)).attr("y",(t=>t.y-28)),m.attr("cx",(t=>t.x)).attr("cy",(t=>t.y))}));const m=l.append("g").selectAll("circle").data(i).join("circle").attr("r",3).attr("fill","#ffffffff").attr("opacity",.7).attr("stroke","#000000ff").attr("stroke-width",1).attr("stroke-opacity",.8);r()}));